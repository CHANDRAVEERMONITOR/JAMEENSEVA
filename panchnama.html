<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡§™‡§Ç‡§ö‡§®‡§æ‡§Æ‡§æ ‡§¨‡§ü‡§µ‡§æ‡§∞‡§æ - JameenSeva.in</title>
    <style>
        body { font-family: 'Segoe UI', Arial, sans-serif; background-color: #f0f4f8; margin: 0; padding: 15px; }
        .container { max-width: 500px; margin: auto; background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); border-top: 5px solid #005689; }
        h2 { color: #005689; text-align: center; margin-bottom: 20px; font-size: 20px; }
        .form-group { margin-bottom: 15px; }
        label { font-weight: bold; display: block; margin-bottom: 5px; color: #333; font-size: 14px; }
        select, input { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 6px; box-sizing: border-box; font-size: 16px; background-color: #fafafa; }
        .row { display: flex; gap: 10px; }
        .row .form-group { flex: 1; }
        button { width: 100%; padding: 15px; background-color: #28a745; color: white; border: none; border-radius: 6px; font-size: 18px; font-weight: bold; cursor: pointer; margin-top: 10px; transition: 0.3s; }
        button:disabled { background-color: #ccc; cursor: not-allowed; }
        .upload-box { background: #eefbff; border: 1px dashed #005689; padding: 15px; border-radius: 8px; margin-bottom: 15px; }
        #status-msg { display:none; text-align: center; font-weight: bold; color: #005689; margin-top: 10px; }
    </style>
</head>
<body>

<div class="container">
    <h2> ‡§™‡§Ç‡§ö‡§®‡§æ‡§Æ‡§æ ‡§¨‡§ü‡§µ‡§æ‡§∞‡§æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ë‡§∞‡•ç‡§°‡§∞ </h2>
    
    <div class="form-group">
        <label>1. ‡§ú‡§ø‡§≤‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç (District):</label>
        <select id="district" onchange="loadBlocks()">
            <option value="">-- ‡§ö‡•Å‡§®‡•á‡§Ç --</option>
        </select>
    </div>

    <div class="form-group">
        <label>2. ‡§™‡•ç‡§∞‡§ñ‡§Ç‡§° ‡§ö‡•Å‡§®‡•á‡§Ç (Block):</label>
        <select id="block"><option value="">-- ‡§™‡§π‡§≤‡•á ‡§ú‡§ø‡§≤‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç --</option></select>
    </div>

    <div class="row">
        <div class="form-group"><label>3. ‡§•‡§æ‡§®‡§æ ‡§®‡§Ç‡§¨‡§∞:</label><input type="number" id="thana_no" placeholder="‡§â‡§¶‡§æ. 125"></div>
        <div class="form-group"><label>4. ‡§Æ‡•å‡§ú‡§æ/‡§ó‡§æ‡§Å‡§µ:</label><input type="text" id="village" placeholder="‡§ó‡§æ‡§Å‡§µ ‡§ï‡§æ ‡§®‡§æ‡§Æ"></div>
        <div class="form-group"><label>5. ‡§∞‡•à‡§Ø‡§§ ‡§ï‡§æ ‡§®‡§æ‡§Æ(‡§Ø‡§¶‡§ø ‡§π‡•ã):</label><input type="text" id="raiyatname" placeholder="‡§Ö‡§™‡§®‡§æ ‡§®‡§æ‡§Æ ‡§≤‡§ø‡§ñ‡•á‡§Ç"></div>
    </div>

    <div class="upload-box">
        <label>üìÑ ‡§Ü‡§Æ‡•Ä‡§® ‡§Ø‡§æ ‡§ñ‡•Å‡§¶ ‡§ï‡•á ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§¨‡§®‡§æ‡§Ø‡§æ ‡§π‡•Å‡§Ü ‡§∞‡•å‡§´ ‡§∂‡•á‡§°‡•ç‡§Ø‡•Ç‡§≤ ‡§ï‡§æ ‡§´‡•ã‡§ü‡•ã ‡§î‡§∞ ‡§∏‡§æ‡§¶‡•á ‡§ï‡§æ‡§ó‡§ú ‡§™‡§∞ ‡§µ‡§Ç‡§∂‡§æ‡§µ‡§≤‡•Ä  ‡§¨‡§®‡§æ‡§ï‡§∞ ‡§∏‡§≠‡•Ä ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç (PDF/DOC/Image):</label>
        <input type="file" id="user_file">
    </div>

    <div class="form-group"><label>6. ‡§™‡•Ç‡§∞‡§æ ‡§™‡§§‡§æ:</label><input type="text" id="full_address" placeholder="‡§ú‡§π‡§æ‡§Å ‡§ï‡•Å‡§∞‡§ø‡§Ø‡§∞ ‡§≠‡•á‡§ú‡§®‡§æ ‡§π‡•à"></div>
    <div class="form-group"><label>6. ‡§™‡§ø‡§® ‡§ï‡•ã‡§°:</label><input type="text" id="pincode" placeholder="‡§â‡§¶‡§æ. 846604"></div>
    <div class="form-group"><label>7. ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞:</label><input type="tel" id="mobile" maxlength="10"></div>

    <button id="submit-btn" onclick="submitOrder()">‡§ë‡§∞‡•ç‡§°‡§∞ ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡•á‡§Ç</button>
    <div id="status-msg">‡§™‡•ç‡§∞‡•ã‡§∏‡•á‡§∏‡§ø‡§Ç‡§ó... ‡§´‡§æ‡§á‡§≤ ‡§Ö‡§™‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à, ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•á‡§ú ‡§® ‡§õ‡•ã‡•ú‡•á‡§Ç‡•§</div>
</div>

<script>
// BIHAR FULL DATA LIST
const biharData = {
    "Araria": ["Araria", "Bhargama", "Forbesganj", "Jokihat", "Kursakanta", "Narpatganj", "Palasi", "Raniganj", "Sikti"],
    "Arwal": ["Arwal", "Kaler", "Karpi", "Kurtha", "Sonbhadra Banshi Suryapur"],
    "Aurangabad": ["Aurangabad", "Barun", "Daudnagar", "Deo", "Goh", "Haspura", "Kutumba", "Madanpur", "Nabinagar", "Obra", "Rafiganj"],
    "Banka": ["Amarpur", "Banka", "Barahat", "Bausi", "Chandan", "Dhoraiya", "Fullidumar", "Katoriya", "Laukaha", "Panchrukhi", "Rajaun", "Shambhuganj"],
    "Begusarai": ["Bakhri", "Balia", "Barauni", "Begusarai", "Bhagwanpur", "Cheria-Bariarpur", "Chhorahi", "Garhpura", "Khodawandpur", "Mansurchak", "Matihani", "Naokothi", "Sahebpur Kamal", "Shamho Akha Kurha", "Teghra"],
    "Bhagalpur": ["Bariarpur", "Bauxi", "Bhagalpur", "Colgong", "Gopalpur", "Ismailpur", "Jagdishpur", "Kahalgaon", "Kharik", "Narayanpur", "Nathnagar", "Pirpainti", "Rangrachowk", "Sabour", "Shahkund", "Sultanganj"],
    "Bhojpur": ["Agiaon", "Arrah", "Barhara", "Behea", "Charpokhari", "Gadhani", "Jagdishpur", "Koilwar", "Piro", "Sahar", "Sandesh", "Shahpur", "Tarari", "Udwantnagar"],
    "Buxar": ["Brahmpur", "Buxar", "Chakki", "Chausa", "Chougain", "Dumraon", "Itarhi", "Nawanagar", "Rajpur", "Simri"],
    "Darbhanga": ["Alinagar", "Bahadurpur", "Baheri", "Benipur", "Biraul", "Darbhanga", "Ghanshyampur", "Hanuman Nagar", "Hayaghat", "Jale", "Keoti", "Kiratpur", "Kusheshwar Asthan", "Kusheshwar Asthan East", "Singhwara", "Tardih"],
    "East Champaran": ["Adapur", "Areraj", "Banjaria", "Bankatwa", "Chakia", "Chiraia", "Dhaka", "Ghorasahan", "Harsidhi", "Kalyanpur", "Kesaria", "Kotwa", "Madhuban", "Mehsi", "Motihari", "Paharpur", "Pakri Dayal", "Patahi", "Phenhara", "Piprakothi", "Ramgarhwa", "Raxaul", "Sangrampur", "Sugauli", "Turkaulia"],
    "Gaya": ["Amas", "Atri", "Bankey Bazar", "Barachatti", "Belaganj", "Bodh Gaya", "Dobhi", "Dumararia", "Fatehpur", "Gaya Town", "Guraru", "Gurua", "Imamganj", "Khizirsarai", "Konch", "Manpur", "Mohanpur", "Muhali", "Neem Chak Bathani", "Paraiya", "Sherghati", "Tan Kuppa", "Tikari", "Wazirganj"],
    "Gopalganj": ["Baikunthpur", "Barauli", "Bhorey", "Gopalganj", "Hathua", "Katiya", "Kuchaikote", "Manjha", "Panchdeori", "Phulwariya", "Sidhwalia", "Thawe", "Uchka Gaon", "Vijayipur"],
    "Jamui": ["Barhat", "Chakai", "Gidhaur", "Islamnagar Aliganj", "Jamui", "Jhajha", "Khaira", "Laxmipur", "Sikandra", "Sono"],
    "Jehanabad": ["Ghosi", "Hulasganj", "Jehanabad", "Kako", "Makhdumpur", "Modanganj", "Ratni Faridpur"],
    "Kaimur": ["Adhaura", "Bhabua", "Chainpur", "Chand", "Durgawati", "Kudra", "Mohania", "Ramgarh", "Rampur", "Rohtas", "Sheosagar"],
    "Katihar": ["Amdabad", "Azamnagar", "Balrampur", "Barari", "Barsoi", "Dandkhora", "Falka", "Hasanganj", "Kadwa", "Katihar", "Korha", "Kursela", "Manihari", "Mansahi", "Pranpur", "Sameli"],
    "Khagaria": ["Alauli", "Beldaur", "Chautham", "Gogri", "Khagaria", "Mansi", "Parbatta"],
    "Kishanganj": ["Bahadurganj", "Dighalbank", "Kishanganj", "Kochadhaman", "Pothia", "Terhagachha", "Thakurganj"],
    "Lakhisarai": ["Barahiya", "Halsi", "Lakhisarai", "Pipariya", "Ramgarh Chowk", "Surajgarha"],
    "Madhepura": ["Alamnagar", "Bihariganj", "Chausa", "Gwalpara", "Kishunganj", "Kumarkhand", "Madhepura", "Murliganj", "Puraini", "Singheshwar", "Udakishunganj"],
    "Madhubani": ["Andhratharhi", "Babubarhi", "Basopatti", "Benipatti", "Bisfi", "Ghoghardiha", "Harlakhi", "Jainagar", "Jhanjharpur", "Kaluahi", "Khajauli", "Khutauna", "Ladhania", "Lakhnaur", "Laukahi", "Madhepur", "Madhubani", "Pandaul", "Phulparas", "Rajnagar"],
    "Munger": ["Asarganj", "Bariarpur", "Dharhara", "Jamalpur", "Kharagpur", "Munger", "Sadaipur", "Sangrampur", "Tarapur"],
    "Muzaffarpur": ["Aurai", "Bandra", "Baruraj", "Bochahan", "Gaighat", "Kanti", "Katra", "Kurhani", "Marwan", "Minapur", "Motipur", "Muzaffarpur", "Musahari", "Paroo", "Sahebganj", "Sakra", "Saraiya"],
    "Nalanda": ["Asthawan", "Ben", "Biharsharif", "Binda", "Chandi", "Ekangarsarai", "Giriak", "Harnaut", "Hilsa", "Islampur", "Karai Parsurai", "Katrisarai", "Nagarnausa", "Noorsarai", "Parwalpur", "Rahui", "Rajgir", "Sarabera", "Silao", "Tharthari"],
    "Nawada": ["Akbarpur", "Govindpur", "Hisua", "Kashi Chak", "Kauwakoal", "Meskaur", "Narayanganj", "Narihat", "Nawada", "Pakribarawan", "Rajauli", "Roh", "Sirdala", "Warisaliganj"],
    "Patna": ["Bakhtiarpur", "Barh", "Belchi", "Bihta", "Bikram", "Danapur", "Daniyanwan", "Dullhin Bazar", "Fatwah", "Khusrupur", "Maner", "Masaurhi", "Mokama", "Naubatpur", "Paliganj", "Pandarak", "Patna Sadar", "Phulwari Sharif", "Punpun", "Sampatchak"],
    "Purnia": ["Amour", "Baisa", "Banmankhi", "Barhara", "Bhawanipur", "Dagarua", "Dhamdaha", "Jalalgarh", "Kasba", "Krityanand Nagar", "Purnia East", "Rupauli", "Srinagar"],
    "Rohtas": ["Akot", "Bikramganj", "Chenari", "Dawath", "Dehri", "Dinara", "Karakat", "Kochas", "Nasriganj", "Nauhatta", "Nokha", "Rajpur", "Rohtas", "Sanjhauli", "Sasaram", "Sheosagar", "Surajpura", "Tilauthu"],
    "Saharsa": ["Banma Itahari", "Kahra", "Mahishi", "Nauhatta", "Panchgachhia", "Patarghat", "Salkhua", "Sattar Katiya", "Simri Bakhtiarpur", "Sonbarsa"],
    "Samastipur": ["Bibhutipur", "Bithan", "Dalsinghsarai", "Kalyanpur", "Khanpur", "Mohanpur", "Mohiuddin Nagar", "Morwa", "Patori", "Pusa", "Rosera", "Samastipur", "Sarairanjan", "Shivaji Nagar", "Singhia", "Tajpur", "Ujiarpur", "Vidyapati Nagar", "Warisnagar"],
    "Saran": ["Amnour", "Baniapur", "Chhapra", "Dariyapur", "Digwara", "Ekma", "Garkha", "Isuapur", "Jalalpur", "Lahladpur", "Maker", "Manjhi", "Marhaura", "Mashrakh", "Nagra", "Panapur", "Parsa", "Revelganj", "Sonepur", "Taraiya"],
    "Sheikhpura": ["Ariari", "Barbigha", "Chewara", "Ghat Kusumbha", "Sheikhopur Sarai", "Sheikhpura"],
    "Sheohar": ["Dumri Katsari", "Piprarhi", "Puranahiya", "Sheohar", "Tariyani"],
    "Sitamarhi": ["Bairgania", "Bajpatti", "Bathnaha", "Belsand", "Bokhra", "Charaut", "Dumra", "Majorganj", "Nanpur", "Parihar", "Parsauni", "Pupri", "Riga", "Runnisaidpur", "Sonbarsa", "Suppi", "Surand"],
    "Siwan": ["Andar", "Barharia", "Basantpur", "Bhagwanpur Hat", "Darauli", "Daraunda", "Gautam Budh Nagar", "Goriakothi", "Guthani", "Hasanpura", "Hussainganj", "Lakri Nabiganj", "Maharajganj", "Mairwa", "Nautan", "Pachrukhi", "Raghunathpur", "Siswan", "Siwan", "Ziradei"],
    "Supaul": ["Basantpur", "Chhatapur", "Kishanpur", "Marauna", "Nirmali", "Pipra", "Pratapganj", "Raghopur", "Saraigarh Bhaptiyahi", "Supaul", "Triveniganj"],
    "Vaishali": ["Bhagwanpur", "Bidupur", "Chehra Kalan", "Desari", "Garaul", "Hajipur", "Jandaha", "Lalganj", "Mahnar", "Mahua", "Patedhi Belsar", "Patepur", "Raghopur", "Raja Pakar", "Sahdei Buzurg", "Vaishali"],
    "West Champaran": ["Bagaha-1", "Bagaha-2", "Bairia", "Bettiah", "Bhithiha", "Gaunaha", "Jogapatti", "Lauriya", "Mainatand", "Majhaulia", "Narkatiaganj", "Narkatiaganj", "Nautan", "Piprasi", "Ramnagar", "Sikta", "Thakrahan", "Yogapatti"]
};

// Initialize Districts
const districtSelect = document.getElementById("district");
for (let dist in biharData) {
    let opt = document.createElement("option"); opt.value = dist; opt.innerHTML = dist;
    districtSelect.appendChild(opt);
}

function loadBlocks() {
    const blockSelect = document.getElementById("block");
    const selectedDist = districtSelect.value;
    blockSelect.innerHTML = '<option value="">-- ‡§¨‡•ç‡§≤‡•â‡§ï ‡§ö‡•Å‡§®‡•á‡§Ç --</option>';
    if (selectedDist) {
        biharData[selectedDist].forEach(block => {
            let opt = document.createElement("option"); opt.value = block; opt.innerHTML = block;
            blockSelect.appendChild(opt);
        });
    }
}

async function submitOrder() {
    const btn = document.getElementById("submit-btn");
    const status = document.getElementById("status-msg");
    const fileInput = document.getElementById("user_file");
    const mobile = document.getElementById("mobile").value;

    if(!mobile || mobile.length < 10) { alert("‡§∏‡§π‡•Ä ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ ‡§≠‡§∞‡•á‡§Ç!"); return; }
    if(fileInput.files.length === 0) { alert("‡§ï‡•É‡§™‡§Ø‡§æ ‡§´‡§æ‡§á‡§≤ ‡§ö‡•Å‡§®‡•á‡§Ç!"); return; }

    btn.disabled = true;
    status.style.display = "block";

    const file = fileInput.files[0];
    const trackingID = "JS-PAN-" + Math.floor(1000 + Math.random() * 9000);
    
    const reader = new FileReader();
    reader.onload = async function(e) {
        const base64Data = e.target.result.split(',')[1];
        
        // 1. DRIVE UPLOAD
        const scriptURL = "https://script.google.com/macros/s/AKfycbxELiNX4DK8tUlsVyaEtDWvStSLPl-8tuN8rkcsCBXNK7W2BcSKhEGGnI2Zck_nPQ-CaQ/exec"; 
        
        try {
            await fetch(scriptURL, {
                method: 'POST',
                mode: 'no-cors',
                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                body: `data=${encodeURIComponent(base64Data)}&mimetype=${encodeURIComponent(file.type)}&filename=${encodeURIComponent(file.name)}`
            });

            // 2. SHEETDB UPLOAD
            const formData = {
                "ORDER ID": trackingID,
                "DATE": new Date().toLocaleDateString('hi-IN'),
                "‡§ú‡§ø‡§≤‡§æ": document.getElementById("district").value,
                "‡§™‡•ç‡§∞‡§ñ‡§Ç‡§°": document.getElementById("block").value,
            "‡§∞‡•à‡§Ø‡§§ ‡§ï‡§æ ‡§®‡§æ‡§Æ(‡§Ø‡§¶‡§ø ‡§π‡•ã)": document.getElementById("raiyatname").value,
                "‡§™‡§ø‡§® ‡§ï‡•ã‡§°": document.getElementById("pincode").value,
                "‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤": mobile,
                "‡§™‡§§‡§æ": document.getElementById("full_address").value
            };

            await fetch('https://sheetdb.io/api/v1/tethdim34qjsy', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ data: [formData] })
            });

            alert("‚úÖ ‡§∏‡§´‡§≤‡§§‡§æ! ‡§ë‡§∞‡•ç‡§°‡§∞ ID: " + trackingID + "\n‡§¶‡§∏‡•ç‡§§‡§æ‡§µ‡•á‡§ú ‡§Ö‡§™‡§≤‡•ã‡§° ‡§π‡•ã ‡§ó‡§è ‡§π‡•à‡§Ç‡•§ ‡§π‡§Æ ‡§ú‡§≤‡•ç‡§¶ ‡§Ü‡§™‡§∏‡•á ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡§∞‡•á‡§Ç‡§ó‡•á ");
            location.reload();

        } catch (err) {
            alert("‡§§‡•ç‡§∞‡•Å‡§ü‡§ø: " + err.message);
            btn.disabled = false;
            status.style.display = "none";
        }
    };
    reader.readAsDataURL(file);
}
</script>
</body>
</html>
